import{r as c,a as n,j as e,b as L,R as P,F as z,L as E,u as I,C as T}from"./index-164b90a9.js";import{N as _}from"./navbar-a022e712.js";import{S as j}from"./sidebar-79dd54a4.js";import{M}from"./mininav-e526fb88.js";import{F}from"./floatingButton-82a6778e.js";var C=0;function $({product:s,model:b,setQuantity:a,quantity:i}){var m,u,l,y;const{reduceCartList:g,cartList:f}=c.useContext(L),[r,p]=c.useState("default"),d=s.inventory.findIndex(h=>h.model==b),v=()=>e("div",{className:"col-auto p-0 my-auto me-3",children:n("select",{className:"form-select fs-6",onChange:k=>{p(k.currentTarget.value),a(0)},value:r,children:[e("option",{value:"default",className:"fs-6",children:"Talle"}),s.inventory[d].sizes.map((k,w)=>{if(k.stock)return e("option",{className:"fs-6",value:k.size,children:k.size},w)})]})}),t=s.inventory[d].sizes.findIndex(h=>h.size==r),S=((m=s.inventory[d].sizes[t])==null?void 0:m.weight)||0,N=((u=s.inventory[d].sizes[t])==null?void 0:u.stock)||0,x=((l=s.inventory[d].sizes[t])==null?void 0:l._id)||"";console.log({size_id:x,weight:S,currentStock:N});const o=((y=f.find(h=>h.name==s.name&&h.model==b&&h.size==r))==null?void 0:y.quantity)||0;return n("div",{className:"row",hidden:!0,children:[e("div",{className:"col-auto",children:n("div",{className:"input-group m-2 ms-0 m-sm-2",children:[e("button",{className:"btn btn-light fs-3 border botones fw-semibold py-0 pb-1",onClick:()=>{i+o<N&&a(i+1)},children:"+"}),e("span",{className:"input-group-text fs-5 border px-3",children:i}),e("button",{className:"btn btn-light fs-3 border px-3 botones fw-semibold py-0 pb-1",onClick:()=>{i>0&&a(i-1)},children:"-"})]})}),e(v,{}),e("div",{className:"col-auto p-0 my-auto",children:e("button",{className:"btn btn-secondary_blue",onClick:()=>{i>0&&r!="default"&&(g({type:"add",number:i,product:{...s,size_id:x,model:b,size:r,quantity:i,weight:S,stock:N}}),a(0))},children:e("img",{src:"/addtocart.png",height:"30px",className:"addtocart_icon"})})})]})}function A({product:s,available:b}){const[a,i]=c.useState(s.inventory[0].model),[g,f]=c.useState(0),r=()=>s.inventory.find(l=>l.model==a).sizes.filter(l=>l.stock>0).map(l=>(C=C+1,n(P.Fragment,{children:[e("span",{className:"badge bg-secondary pb-1",children:l.size}),e("span",{children:" "})]},C)));function p(){return s.inventory.map((o,m)=>e("span",{className:"badge bg-primary pb-1 me-1",children:o.model},m))}const d=()=>window.localStorage.getItem("UserSession")==null?e(z,{}):n(z,{children:[e(E,{to:`/edititem/${s._id}`,children:e("button",{className:"m-2 btn btn-danger",children:"Editar Producto"})}),e("button",{className:"btn btn-danger",onClick:v,children:"Eliminar Producto"})]}),v=o=>{o.preventDefault();const u={method:"DELETE",headers:{Authorization:`Bearer ${window.localStorage.getItem("UserSession")}`}};fetch(`https://dinokids.site/products/${s._id}`,u).then(l=>l.json()).then(l=>console.log(l))},[t,S]=c.useState("default"),N=o=>{o.currentTarget.value!="default"&&(S(o.currentTarget.value),i(o.currentTarget.value),f(0),console.log(o.currentTarget.value))},x=()=>s.inventory.map((m,u)=>e("option",{value:m.model,children:m.model},u));return n("div",{className:"col-12 col-sm-9 col-lg-10",children:[e("div",{className:"card p-0 mt-2 mb-3 bg-background_blue border-border_blue border-2",children:n("div",{className:"row g-0",children:[e("div",{className:"col-12 col-sm-4 p-3",children:e("img",{src:`https://dinokids.site/resized/${s.image}`,className:"img-fluid rounded-start rounded-end"})}),e("div",{className:"col-12 col-sm-8",children:n("div",{className:"card-body text-start",children:[e("h5",{className:"card-title fw-semibold",children:s.name}),e("div",{className:"card p-3",children:n("div",{className:"card-body p-0",children:[n("h5",{children:[s.description," ",e("span",{className:"badge bg-danger pb-1",children:a})]}),n("h5",{children:["Marca:"," ",e("span",{className:"badge bg-success pb-1",children:s.brand})]}),n("h5",{children:["Precio:"," ",e("span",{className:"badge bg-success pb-1",children:s.price})]}),n("h5",{children:["Modelos en Stock: ",p()]}),n("select",{className:"form-select fs-5 py-1",value:t,onChange:N,children:[e("option",{className:"fs-6",value:"default",children:"Seleccione el modelo"}),x()]}),n("h5",{className:"mt-3",children:["Talles en stock: ",r()]})]})}),e($,{product:s,model:a,setQuantity:f,quantity:g})]})})]})}),d()]})}function G(){const{id:s}=I(),{setActiveCategory:b}=c.useContext(T),[a,i]=c.useState(),[g,f]=c.useState([]),[r,p]=c.useState(!0),[d,v]=c.useState(!0);return c.useEffect(()=>{fetch(`https://dinokids.site/products/${s}`).then(t=>t.json()).then(t=>{console.log(t),i(t),p(!1),b(t.category)})},[]),c.useEffect(()=>{fetch("https://dinokids.site/categories").then(t=>t.json()).then(t=>{console.log(t),f(t),v(!1)})},[]),e(z,{children:n("div",{className:"App container-fluid p-0 m-0 min-vh-100 d-flex flex-column",children:[e(_,{categories:g}),e(M,{product:a==null?void 0:a.name,hideMobileNav:!0}),n("div",{className:"row m-0 flex-grow-1",children:[d?e("div",{className:"col-3 col-lg-2 d-none d-sm-block"}):e(j,{categories:g}),r?e(z,{}):e(A,{product:a,available:!0})]}),e(F,{})]})})}export{G as default};
